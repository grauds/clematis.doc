"use strict";(self.webpackChunkclematis_doc=self.webpackChunkclematis_doc||[]).push([[6311],{29037:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"web-applications/more-code-standards","title":"More Code Standards","description":"Checkstyle Configuration","source":"@site/docs/web-applications/more-code-standards.md","sourceDirName":"web-applications","slug":"/web-applications/more-code-standards","permalink":"/clematis.doc/docs/web-applications/more-code-standards","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"checkstyle","permalink":"/clematis.doc/docs/tags/checkstyle"},{"inline":true,"label":"spotbugs","permalink":"/clematis.doc/docs/tags/spotbugs"},{"inline":true,"label":"lombok","permalink":"/clematis.doc/docs/tags/lombok"}],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12,"tags":["checkstyle","spotbugs","lombok"]},"sidebar":"tutorialSidebar","previous":{"title":"Server Application","permalink":"/clematis.doc/docs/web-applications/server-application"},"next":{"title":"Business Domain","permalink":"/clematis.doc/docs/web-applications/business-domain/"}}');var t=o(74848),i=o(28453);const c={sidebar_position:12,tags:["checkstyle","spotbugs","lombok"]},l="More Code Standards",r={},a=[{value:"Checkstyle Configuration",id:"checkstyle-configuration",level:2},{value:"Using Lombok",id:"using-lombok",level:2},{value:"SpotBugs Configuration",id:"spotbugs-configuration",level:2},{value:"Code Smells",id:"code-smells",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"more-code-standards",children:"More Code Standards"})}),"\n",(0,t.jsx)(s.h2,{id:"checkstyle-configuration",children:"Checkstyle Configuration"}),"\n",(0,t.jsxs)(s.p,{children:["Java applications use ",(0,t.jsx)(s.a,{href:"https://checkstyle.sourceforge.io/",children:"Checkstyle"})," to help write code\nthat follows coding standards."]}),"\n",(0,t.jsx)(s.p,{children:"The configuration in the Gradle build file is as follows:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-gradle",metastring:'title="build.gradle"',children:'plugins {\n    id \'checkstyle\'\n}\n\ndependencies {\n    checkstyle "com.puppycrawl.tools:checkstyle:10.9.3"\n}\n\n// ------------ Checkstyle configuration  ---------\ncheckstyle {\n    configProperties.configFile = file("${project.rootDir}/config/checkstyle/checkstyle.xml")\n    configProperties.checkstyleSuppressionFile = file("${project.rootDir}/config/checkstyle/suppressions.xml")\n    ignoreFailures = false\n}\n\ntasks.register(\'checkstyleReport\') {\n    doLast {\n        if (file("${layout.buildDirectory.asFile.get()}/reports/checkstyle/${project.ext.checkType}.xml").exists()) {\n            ant.xslt(in: "${layout.buildDirectory.asFile.get()}/reports/checkstyle/${project.ext.checkType}.xml",\n                    style: "${project.rootDir}/config/checkstyle/checkstyle.xsl",\n                    out: "${layout.buildDirectory.asFile.get()}/reports/checkstyle/checkstyle_${project.ext.checkType}.html")\n        }\n    }\n}\n\n// Tests can be excluded by mask \ntasks.withType(Checkstyle).configureEach {\n    exclude \'**/*Test*\'\n}\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Checkstyle uses a configuration file ",(0,t.jsx)(s.code,{children:"config/checkstyle/checkstyle.xml"})," and a suppression file\n",(0,t.jsx)(s.code,{children:"config/checkstyle/suppressions.xml"}),". These files are kept\nsynchronized across all the repositories to ensure the same code style."]}),"\n",(0,t.jsxs)(s.p,{children:["Optionally, there can be another file with XSL stylesheets ",(0,t.jsx)(s.code,{children:"config/checkstyle/checkstyle.xsl"}),"\nto process XML reports generated by checkstyle Gradle task."]}),"\n",(0,t.jsxs)(s.p,{children:["Gradle can ignore SpotBugs failures if ",(0,t.jsx)(s.code,{children:"ignoreFailures"})," flag is set to true."]}),"\n",(0,t.jsx)(s.h2,{id:"using-lombok",children:"Using Lombok"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://projectlombok.org/",children:"Lombok"})," library is used to avoid boilerplate in code in many cases, presumably for\nData Transfer Objects or domain modeling classes."]}),"\n",(0,t.jsx)(s.p,{children:"The configuration in the Gradle build file is as follows:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-gradle",metastring:'title="build.gradle"',children:"dependencies {\n    annotationProcessor 'org.projectlombok:lombok:1.18.34'\n    compileOnly (\n        'org.projectlombok:lombok'\n    )\n    \n    testAnnotationProcessor 'org.projectlombok:lombok:1.18.34'\n    testCompileOnly (\n        'org.projectlombok:lombok'\n    )\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"spotbugs-configuration",children:"SpotBugs Configuration"}),"\n",(0,t.jsxs)(s.p,{children:["Using ",(0,t.jsx)(s.a,{href:"https://spotbugs.github.io/",children:"SpotBugs"})," library can help detect suspicious\nand dodgy code fragments before the code goes to testing. It's encouraged to have this\nstage configured in the project. The library adds more cases to check\nwith every new version, so it could be a separate development\ntask to keep project code clean after SpotBugs upgrades."]}),"\n",(0,t.jsx)(s.p,{children:"The configuration in the Gradle build file is as follows:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-gradle",metastring:'title="build.gradle"',children:"plugins {\n    id 'com.github.spotbugs' version '6.0.7'\n}\n\ndependencies {\n\n    compileOnly (\n        'com.github.spotbugs:spotbugs:4.8.4',\n        'com.google.code.findbugs:annotations:3.0.1u2',\n    )\n    \n    testCompileOnly (\n            \"com.github.spotbugs:spotbugs:4.8.4\",\n            \"com.google.code.findbugs:annotations:3.0.1u2\",\n    )\n}\n\n// ------------ Spotbugs configuration  ---------\n\nspotbugs {\n    reportsDir = file(\"${layout.buildDirectory.asFile.get()}/reports/spotbugs/main/spotbugs.html\")\n    ignoreFailures = true\n}\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Gradle can ignore SpotBugs failures if ",(0,t.jsx)(s.code,{children:"ignoreFailures"})," flag is set to true."]}),"\n",(0,t.jsx)(s.h2,{id:"code-smells",children:"Code Smells"}),"\n",(0,t.jsxs)(s.p,{children:["Use the following site to surface check the code for most common errors\nand bad patterns: ",(0,t.jsx)(s.a,{href:"https://code-smells.com",children:"Code Smells"}),"."]})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,s,o)=>{o.d(s,{R:()=>c,x:()=>l});var n=o(96540);const t={},i=n.createContext(t);function c(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);